import { Event } from '../../../base/common/event';
import { IDisposable } from '../../../base/common/lifecycle';
import { ICodeEditor } from '../../browser/editorBrowser';
import { Position, IPosition } from '../../common/core/position';
import { ITextModel, IWordAtPosition } from '../../common/model';
import { CompletionItemProvider, CompletionTriggerKind } from '../../common/modes';
import { CompletionModel } from './completionModel';
import { CompletionItem } from './suggest';
import { IEditorWorkerService } from '../../common/services/editorWorkerService';
import { IClipboardService } from '../../../platform/clipboard/common/clipboardService';
import { ITelemetryService } from '../../../platform/telemetry/common/telemetry';
import { ILogService } from '../../../platform/log/common/log';
export interface ICancelEvent {
    readonly retrigger: boolean;
}
export interface ITriggerEvent {
    readonly auto: boolean;
    readonly shy: boolean;
    readonly position: IPosition;
}
export interface ISuggestEvent {
    readonly completionModel: CompletionModel;
    readonly isFrozen: boolean;
    readonly auto: boolean;
    readonly shy: boolean;
}
export interface SuggestTriggerContext {
    readonly auto: boolean;
    readonly shy: boolean;
    readonly triggerKind?: CompletionTriggerKind;
    readonly triggerCharacter?: string;
}
export declare class LineContext {
    static shouldAutoTrigger(editor: ICodeEditor): boolean;
    readonly lineNumber: number;
    readonly column: number;
    readonly leadingLineContent: string;
    readonly leadingWord: IWordAtPosition;
    readonly auto: boolean;
    readonly shy: boolean;
    constructor(model: ITextModel, position: Position, auto: boolean, shy: boolean);
}
export declare const enum State {
    Idle = 0,
    Manual = 1,
    Auto = 2
}
export declare class SuggestModel implements IDisposable {
    private readonly _editor;
    private readonly _editorWorkerService;
    private readonly _clipboardService;
    private readonly _telemetryService;
    private readonly _logService;
    private readonly _toDispose;
    private _quickSuggestDelay;
    private readonly _triggerCharacterListener;
    private readonly _triggerQuickSuggest;
    private _state;
    private _requestToken?;
    private _context?;
    private _currentSelection;
    private _completionModel;
    private readonly _completionDisposables;
    private readonly _onDidCancel;
    private readonly _onDidTrigger;
    private readonly _onDidSuggest;
    readonly onDidCancel: Event<ICancelEvent>;
    readonly onDidTrigger: Event<ITriggerEvent>;
    readonly onDidSuggest: Event<ISuggestEvent>;
    constructor(_editor: ICodeEditor, _editorWorkerService: IEditorWorkerService, _clipboardService: IClipboardService, _telemetryService: ITelemetryService, _logService: ILogService);
    dispose(): void;
    private _updateQuickSuggest;
    private _updateTriggerCharacters;
    get state(): State;
    cancel(retrigger?: boolean): void;
    clear(): void;
    private _updateActiveSuggestSession;
    private _onCursorChange;
    private _refilterCompletionItems;
    trigger(context: SuggestTriggerContext, retrigger?: boolean, onlyFrom?: Set<CompletionItemProvider>, existing?: {
        items: CompletionItem[];
        clipboardText: string | undefined;
    }): void;
    private _telemetryGate;
    private _reportDurationsTelemetry;
    private static _createItemKindFilter;
    private _onNewContext;
}
