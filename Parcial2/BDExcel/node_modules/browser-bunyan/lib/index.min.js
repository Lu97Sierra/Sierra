!function(e,r){"object"==typeof exports&&"undefined"!=typeof module?r(exports,require("@browser-bunyan/levels"),require("@browser-bunyan/console-raw-stream"),require("@browser-bunyan/console-formatted-stream"),require("@browser-bunyan/console-plain-stream")):"function"==typeof define&&define.amd?define(["exports","@browser-bunyan/levels","@browser-bunyan/console-raw-stream","@browser-bunyan/console-formatted-stream","@browser-bunyan/console-plain-stream"],r):r((e||self).bunyan={},e.levels,e.consoleRawStream,e.consoleFormattedStream,e.consolePlainStream)}(this,function(e,r,t,n,i){function s(e,r){return s=Object.setPrototypeOf||function(e,r){return e.__proto__=r,e},s(e,r)}function a(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}function o(e,r,t){return o=a()?Reflect.construct:function(e,r,t){var n=[null];n.push.apply(n,r);var i=new(Function.bind.apply(e,n));return t&&s(i,t.prototype),i},o.apply(null,arguments)}var l="call-stack-error";function c(e){if(null==e)return e;if(Array.isArray(e))return e.slice();if("object"==typeof e){var r={};return Object.keys(e).forEach(function(t){r[t]=e[t]}),r}return e}function f(e){return void 0===e?"undefined":null===e?"null":Array.isArray(e)?"[ "+e.map(function(e){return f(e)}).join(", ")+" ]":"object"==typeof e?JSON.stringify(e):"function"==typeof e?"[Function: "+e.name+"]":"boolean"==typeof e||"number"==typeof e?e:"'"+e.toString()+"'"}function u(e){if("string"!=typeof e){for(var r=new Array(arguments.length),t=0;t<arguments.length;t++)r[t]=f(arguments[t]);return r.join(" ")}for(var n=/%[sdj%]/g,i=1,s=arguments,a=s.length,o=String(e).replace(n,function(e){if("%%"===e)return"%";if(i>=a)return e;switch(e){case"%s":return String(s[i++]);case"%d":return Number(s[i++]);case"%j":try{return JSON.stringify(s[i++])}catch(e){return"[Circular]"}default:return e}}),l=s[i];i<a;l=s[++i])o+=null===l||"object"!=typeof l?" "+l:" "+f(l);return o}function m(e,r){var t=e.split("\n");t[0]&&t[0].indexOf(l)>=0&&t.shift();var n=t[r],i=null;if(n){var s=/^\s*(at|.*@)\s*(.+)?$/.exec(n);i=Array.isArray(s)&&s[2]?s[2]:n}return i}var h={};function v(e,r){if(r){if(h[r])return;h[r]=!0}console.error(e+"\n")}function y(e){return h[e]}function p(){var e=[];return function(r,t){return t&&"object"==typeof t?-1!==e.indexOf(t)?"[Circular]":(e.push(t),t):t}}var d=/*#__PURE__*/function(){function e(r,n,i){var s,a,o,l,f=this;if(!(this instanceof e))return new e(r,n);if(void 0!==n&&(s=r,r=n,!(s instanceof e)))throw new TypeError("invalid Logger creation: do not pass a second arg");if(!r)throw new TypeError("options (object) is required");if(s){if(r.name)throw new TypeError("invalid options.name: child cannot set logger name")}else if(!r.name)throw new TypeError("options.name (string) is required");if(r.stream&&r.streams)throw new TypeError('cannot mix "streams" and "stream" options');if(r.streams&&!Array.isArray(r.streams))throw new TypeError("invalid options.streams: must be an array");if(r.serializers&&("object"!=typeof r.serializers||Array.isArray(r.serializers)))throw new TypeError("invalid options.serializers: must be an object");if(s&&i){this._level=s._level,this.streams=s.streams,this.serializers=s.serializers,this.src=s.src,a=this.fields={};var u=Object.keys(s.fields);for(l=0;l<u.length;l++)a[o=u[l]]=s.fields[o];var m=Object.keys(r);for(l=0;l<m.length;l++)a[o=m[l]]=r[o]}else{if(s){for(this._level=s._level,this.streams=[],l=0;l<s.streams.length;l++){var h=c(s.streams[l]);this.streams.push(h)}this.serializers=c(s.serializers),this.src=s.src,this.fields=c(s.fields),r.level&&this.level(r.level)}else this._level=Number.POSITIVE_INFINITY,this.streams=[],this.serializers=null,this.src=!1,this.fields={};r.stream?this.addStream({type:"stream",stream:r.stream,level:r.level}):r.streams?r.streams.forEach(function(e){f.addStream(e,r.level)}):s&&r.level?this.level(r.level):s||this.addStream({type:"raw",stream:new t.ConsoleRawStream,level:r.level}),r.serializers&&this.addSerializers(r.serializers),r.src&&(this.src=!0),delete(a=c(r)).stream,delete a.level,delete a.streams,delete a.serializers,delete a.src,this.serializers&&this._applySerializers(a),Object.keys(a).forEach(function(e){f.fields[e]=a[e]})}}var n=e.prototype;return n.addStream=function(e,t){void 0===t&&(t=r.INFO),(e=c(e)).type="raw",e.level=r.resolveLevel(e.level||t),e.level<this._level&&(this._level=e.level),this.streams.push(e),delete this.haveNonRawStreams},n.addSerializers=function(e){var r=this;this.serializers||(this.serializers={}),Object.keys(e).forEach(function(t){var n=e[t];if("function"!=typeof n)throw new TypeError(u('invalid serializer for "%s" field: must be a function',t));r.serializers[t]=n})},n.child=function(e,r){return new this.constructor(this,e||{},r)},n.level=function(e){if(void 0===e)return this._level;for(var t=r.resolveLevel(e),n=this.streams.length,i=0;i<n;i++)this.streams[i].level=t;this._level=t},n.levels=function(e,t){if(void 0===e)return this.streams.map(function(e){return e.level});var n;if("number"==typeof e){if(void 0===(n=this.streams[e]))throw new Error("invalid stream index: "+e)}else{for(var i=this.streams.length,s=0;s<i;s++){var a=this.streams[s];if(a.name===e){n=a;break}}if(!n)throw new Error(u('no stream with name "%s"',e))}if(void 0===t)return n.level;var o=r.resolveLevel(t);n.level=o,o<this._level&&(this._level=o)},n._applySerializers=function(e,r){var t=this;Object.keys(this.serializers).forEach(function(n){if(!(void 0===e[n]||r&&r[n]))try{e[n]=t.serializers[n](e[n])}catch(r){v(u('bunyan: ERROR: Exception thrown from the "%s" Bunyan serializer. This should never happen. This is a bugin that serializer function.\n%s',n,r.stack||r)),e[n]=u('(Error in Bunyan log "%s" serializer broke field. See stderr for details.)',n)}})},n._emit=function(e,r){var t,n;if(void 0===this.haveNonRawStreams)for(this.haveNonRawStreams=!1,t=0;t<this.streams.length;t++)if(!this.streams[t].raw){this.haveNonRawStreams=!0;break}if(r||this.haveNonRawStreams)try{n=JSON.stringify(e,p())+"\n"}catch(r){var i=r.stack.split(/\n/g,2).join("\n");v('bunyan: ERROR: Exception in `JSON.stringify(rec)`. You can install the "safe-json-stringify" module to have Bunyan fallback to safer stringification. Record:\n'+function(e,r){return r||(r="    "),r+e.split(/\r?\n/g).join("\n"+r)}(u("%s\n%s",e,r.stack)),i),n=u("(Exception in JSON.stringify(rec): %j. See stderr for details.)\n",r.message)}if(r)return n;var s=e.level;for(t=0;t<this.streams.length;t++){var a=this.streams[t];a.level<=s&&a.stream.write(e)}return n},e}();function b(e){return function(){var t=this;function n(n){var a;n[0]instanceof Error?(i={err:t.serializers&&t.serializers.err?t.serializers.err(n[0]):w.err(n[0])},a={err:!0},s=1===n.length?[i.err.message]:Array.prototype.slice.call(n,1)):"object"!=typeof n[0]&&null!==n[0]||Array.isArray(n[0])?(i=null,s=Array.prototype.slice.call(n)):(i=n[0],s=1===n.length&&i.err&&i.err instanceof Error?[i.err.message]:Array.prototype.slice.call(n,1));var o=c(t.fields);o.level=e;var f=i?c(i):null;if(f&&(t.serializers&&t._applySerializers(f,a),Object.keys(f).forEach(function(e){o[e]=f[e]})),o.levelName=r.nameFromLevel[e],o.msg=s.length?u.apply(t,s):"",o.time||(o.time=new Date),t.src&&!o.src)try{throw new Error(l)}catch(e){var h=e.stack?m(e.stack,2):"";h||y("src")||v("Unable to determine src line info","src"),o.src=h||""}return o.v=1,o}var i=null,s=arguments,a=null;if(0===arguments.length)return this._level<=e;this._level>e||(a=n(s),this._emit(a))}}function g(e){var r=e.stack||e.toString();if(e.cause&&"function"==typeof e.cause){var t=e.cause();t&&(r+="\nCaused by: "+g(t))}return r}d.prototype.trace=b(r.TRACE),d.prototype.debug=b(r.DEBUG),d.prototype.info=b(r.INFO),d.prototype.warn=b(r.WARN),d.prototype.error=b(r.ERROR),d.prototype.fatal=b(r.FATAL);var w={err:function(e){return e&&e.stack?{message:e.message,name:e.name,stack:g(e),code:e.code,signal:e.signal}:e}};Object.defineProperty(e,"DEBUG",{enumerable:!0,get:function(){return r.DEBUG}}),Object.defineProperty(e,"ERROR",{enumerable:!0,get:function(){return r.ERROR}}),Object.defineProperty(e,"FATAL",{enumerable:!0,get:function(){return r.FATAL}}),Object.defineProperty(e,"INFO",{enumerable:!0,get:function(){return r.INFO}}),Object.defineProperty(e,"TRACE",{enumerable:!0,get:function(){return r.TRACE}}),Object.defineProperty(e,"WARN",{enumerable:!0,get:function(){return r.WARN}}),Object.defineProperty(e,"levelFromName",{enumerable:!0,get:function(){return r.levelFromName}}),Object.defineProperty(e,"nameFromLevel",{enumerable:!0,get:function(){return r.nameFromLevel}}),Object.defineProperty(e,"resolveLevel",{enumerable:!0,get:function(){return r.resolveLevel}}),Object.defineProperty(e,"ConsoleRawStream",{enumerable:!0,get:function(){return t.ConsoleRawStream}}),Object.defineProperty(e,"ConsoleFormattedStream",{enumerable:!0,get:function(){return n.ConsoleFormattedStream}}),Object.defineProperty(e,"ConsolePlainStream",{enumerable:!0,get:function(){return i.ConsolePlainStream}}),e.Logger=d,e.createLogger=function(){return o(d,[].slice.call(arguments))},e.safeCycles=p,e.stdSerializers=w});
//# sourceMappingURL=index.min.js.map
