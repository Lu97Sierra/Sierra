!function(e,r){"object"==typeof exports&&"undefined"!=typeof module?r(exports):"function"==typeof define&&define.amd?define(["exports"],r):r((e||self).bunyan={})}(this,function(e){var r={trace:10,debug:20,info:30,warn:40,error:50,fatal:60},t={};function s(e){return"string"==typeof e?r[e.toLowerCase()]:e}function n(e,r){return n=Object.setPrototypeOf||function(e,r){return e.__proto__=r,e},n(e,r)}function i(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}function o(e,r,t){return o=i()?Reflect.construct:function(e,r,t){var s=[null];s.push.apply(s,r);var i=new(Function.bind.apply(e,s));return t&&n(i,t.prototype),i},o.apply(null,arguments)}Object.keys(r).forEach(function(e){t[r[e]]=e});var l="call-stack-error";function a(e){if(null==e)return e;if(Array.isArray(e))return e.slice();if("object"==typeof e){var r={};return Object.keys(e).forEach(function(t){r[t]=e[t]}),r}return e}function c(e){return void 0===e?"undefined":null===e?"null":Array.isArray(e)?"[ "+e.map(function(e){return c(e)}).join(", ")+" ]":"object"==typeof e?JSON.stringify(e):"function"==typeof e?"[Function: "+e.name+"]":"boolean"==typeof e||"number"==typeof e?e:"'"+e.toString()+"'"}function f(e){if("string"!=typeof e){for(var r=new Array(arguments.length),t=0;t<arguments.length;t++)r[t]=c(arguments[t]);return r.join(" ")}for(var s=/%[sdj%]/g,n=1,i=arguments,o=i.length,l=String(e).replace(s,function(e){if("%%"===e)return"%";if(n>=o)return e;switch(e){case"%s":return String(i[n++]);case"%d":return Number(i[n++]);case"%j":try{return JSON.stringify(i[n++])}catch(e){return"[Circular]"}default:return e}}),a=i[n];n<o;a=i[++n])l+=null===a||"object"!=typeof a?" "+a:" "+c(a);return l}function u(e,r){var t=e.split("\n");t[0]&&t[0].indexOf(l)>=0&&t.shift();var s=t[r],n=null;if(s){var i=/^\s*(at|.*@)\s*(.+)?$/.exec(s);n=Array.isArray(i)&&i[2]?i[2]:s}return n}var h={};function v(e,r){if(r){if(h[r])return;h[r]=!0}console.error(e+"\n")}function p(e){return h[e]}function m(){var e=[];return function(r,t){return t&&"object"==typeof t?-1!==e.indexOf(t)?"[Circular]":(e.push(t),t):t}}var y=/*#__PURE__*/function(){function e(){}return e.prototype.write=function(e){e.level<30?console.log(e):e.level<40?console.info(e):e.level<50?console.warn(e):console.error(e),e.err&&e.err.stack&&console.error(e.err.stack),e.obj&&console.log(e.obj)},e}(),d=/*#__PURE__*/function(){function e(r,t,s){var n,i,o,l,c=this;if(!(this instanceof e))return new e(r,t);if(void 0!==t&&(n=r,r=t,!(n instanceof e)))throw new TypeError("invalid Logger creation: do not pass a second arg");if(!r)throw new TypeError("options (object) is required");if(n){if(r.name)throw new TypeError("invalid options.name: child cannot set logger name")}else if(!r.name)throw new TypeError("options.name (string) is required");if(r.stream&&r.streams)throw new TypeError('cannot mix "streams" and "stream" options');if(r.streams&&!Array.isArray(r.streams))throw new TypeError("invalid options.streams: must be an array");if(r.serializers&&("object"!=typeof r.serializers||Array.isArray(r.serializers)))throw new TypeError("invalid options.serializers: must be an object");if(n&&s){this._level=n._level,this.streams=n.streams,this.serializers=n.serializers,this.src=n.src,i=this.fields={};var f=Object.keys(n.fields);for(l=0;l<f.length;l++)i[o=f[l]]=n.fields[o];var u=Object.keys(r);for(l=0;l<u.length;l++)i[o=u[l]]=r[o]}else{if(n){for(this._level=n._level,this.streams=[],l=0;l<n.streams.length;l++){var h=a(n.streams[l]);this.streams.push(h)}this.serializers=a(n.serializers),this.src=n.src,this.fields=a(n.fields),r.level&&this.level(r.level)}else this._level=Number.POSITIVE_INFINITY,this.streams=[],this.serializers=null,this.src=!1,this.fields={};r.stream?this.addStream({type:"stream",stream:r.stream,level:r.level}):r.streams?r.streams.forEach(function(e){c.addStream(e,r.level)}):n&&r.level?this.level(r.level):n||this.addStream({type:"raw",stream:new y,level:r.level}),r.serializers&&this.addSerializers(r.serializers),r.src&&(this.src=!0),delete(i=a(r)).stream,delete i.level,delete i.streams,delete i.serializers,delete i.src,this.serializers&&this._applySerializers(i),Object.keys(i).forEach(function(e){c.fields[e]=i[e]})}}var r=e.prototype;return r.addStream=function(e,r){void 0===r&&(r=30),(e=a(e)).type="raw",e.level=s(e.level||r),e.level<this._level&&(this._level=e.level),this.streams.push(e),delete this.haveNonRawStreams},r.addSerializers=function(e){var r=this;this.serializers||(this.serializers={}),Object.keys(e).forEach(function(t){var s=e[t];if("function"!=typeof s)throw new TypeError(f('invalid serializer for "%s" field: must be a function',t));r.serializers[t]=s})},r.child=function(e,r){return new this.constructor(this,e||{},r)},r.level=function(e){if(void 0===e)return this._level;for(var r=s(e),t=this.streams.length,n=0;n<t;n++)this.streams[n].level=r;this._level=r},r.levels=function(e,r){if(void 0===e)return this.streams.map(function(e){return e.level});var t;if("number"==typeof e){if(void 0===(t=this.streams[e]))throw new Error("invalid stream index: "+e)}else{for(var n=this.streams.length,i=0;i<n;i++){var o=this.streams[i];if(o.name===e){t=o;break}}if(!t)throw new Error(f('no stream with name "%s"',e))}if(void 0===r)return t.level;var l=s(r);t.level=l,l<this._level&&(this._level=l)},r._applySerializers=function(e,r){var t=this;Object.keys(this.serializers).forEach(function(s){if(!(void 0===e[s]||r&&r[s]))try{e[s]=t.serializers[s](e[s])}catch(r){v(f('bunyan: ERROR: Exception thrown from the "%s" Bunyan serializer. This should never happen. This is a bugin that serializer function.\n%s',s,r.stack||r)),e[s]=f('(Error in Bunyan log "%s" serializer broke field. See stderr for details.)',s)}})},r._emit=function(e,r){var t,s;if(void 0===this.haveNonRawStreams)for(this.haveNonRawStreams=!1,t=0;t<this.streams.length;t++)if(!this.streams[t].raw){this.haveNonRawStreams=!0;break}if(r||this.haveNonRawStreams)try{s=JSON.stringify(e,m())+"\n"}catch(r){var n=r.stack.split(/\n/g,2).join("\n");v('bunyan: ERROR: Exception in `JSON.stringify(rec)`. You can install the "safe-json-stringify" module to have Bunyan fallback to safer stringification. Record:\n'+function(e,r){return r||(r="    "),r+e.split(/\r?\n/g).join("\n"+r)}(f("%s\n%s",e,r.stack)),n),s=f("(Exception in JSON.stringify(rec): %j. See stderr for details.)\n",r.message)}if(r)return s;var i=e.level;for(t=0;t<this.streams.length;t++){var o=this.streams[t];o.level<=i&&o.stream.write(e)}return s},e}();function g(e){return function(){var r=this;function s(s){var o;s[0]instanceof Error?(n={err:r.serializers&&r.serializers.err?r.serializers.err(s[0]):w.err(s[0])},o={err:!0},i=1===s.length?[n.err.message]:Array.prototype.slice.call(s,1)):"object"!=typeof s[0]&&null!==s[0]||Array.isArray(s[0])?(n=null,i=Array.prototype.slice.call(s)):(n=s[0],i=1===s.length&&n.err&&n.err instanceof Error?[n.err.message]:Array.prototype.slice.call(s,1));var c=a(r.fields);c.level=e;var h=n?a(n):null;if(h&&(r.serializers&&r._applySerializers(h,o),Object.keys(h).forEach(function(e){c[e]=h[e]})),c.levelName=t[e],c.msg=i.length?f.apply(r,i):"",c.time||(c.time=new Date),r.src&&!c.src)try{throw new Error(l)}catch(e){var m=e.stack?u(e.stack,2):"";m||p("src")||v("Unable to determine src line info","src"),c.src=m||""}return c.v=1,c}var n=null,i=arguments,o=null;if(0===arguments.length)return this._level<=e;this._level>e||(o=s(i),this._emit(o))}}function b(e){var r=e.stack||e.toString();if(e.cause&&"function"==typeof e.cause){var t=e.cause();t&&(r+="\nCaused by: "+b(t))}return r}d.prototype.trace=g(10),d.prototype.debug=g(20),d.prototype.info=g(30),d.prototype.warn=g(40),d.prototype.error=g(50),d.prototype.fatal=g(60);var w={err:function(e){return e&&e.stack?{message:e.message,name:e.name,stack:b(e),code:e.code,signal:e.signal}:e}},j={levels:{trace:"color: DeepPink",debug:"color: GoldenRod",info:"color: DarkTurquoise",warn:"color: Purple",error:"color: Crimson",fatal:"color: Black"},def:"color: DimGray",msg:"color: SteelBlue",src:"color: DimGray; font-style: italic; font-size: 0.9em"},z=/*#__PURE__*/function(){function e(e){var r=void 0===e?{}:e,t=r.logByLevel,s=r.css,n=void 0===s?j:s;this.logByLevel=void 0!==t&&t,this.css=n}return e.prototype.write=function(e){var r,s,n=this.css.def,i=this.css.msg,o=this.css.src,l=e.childName?e.name+"/"+e.childName:e.name,a=t[e.level],c=(Array(6-a.length).join(" ")+a).toUpperCase();this.logByLevel?(10===e.level?a="debug":60===e.level&&(a="error"),s="function"==typeof console[a]?console[a]:console.log):s=console.log,r=e.level<20?this.css.levels.trace:e.level<30?this.css.levels.debug:e.level<40?this.css.levels.info:e.level<50?this.css.levels.warn:e.level<60?this.css.levels.error:this.css.levels.fatal;var f=function(e,r){return Array(r+1-(e+"").length).join("0")+e},u=[];u.push("[%s:%s:%s:%s] %c%s%c: %s: %c%s "+(e.src?"%c%s":"")),u.push(f(e.time.getHours(),2)),u.push(f(e.time.getMinutes(),2)),u.push(f(e.time.getSeconds(),2)),u.push(f(e.time.getMilliseconds(),4)),u.push(r),u.push(c),u.push(n),u.push(l),u.push(i),u.push(e.msg),e.src&&(u.push(o),u.push(e.src)),e.obj&&(u.push("\n"),u.push(e.obj)),e.err&&e.err.stack&&(u.push("\n"),u.push(e.err.stack)),s.apply(console,u)},e.getDefaultCss=function(){return j},e}(),S=/*#__PURE__*/function(){function e(e){var r=(void 0===e?{}:e).logByLevel;this.logByLevel=void 0!==r&&r}return e.prototype.write=function(e){var r,s=e.childName?e.name+"/"+e.childName:e.name,n=t[e.level],i=(Array(6-n.length).join(" ")+n).toUpperCase();this.logByLevel?(10===e.level?n="debug":60===e.level&&(n="error"),r="function"==typeof console[n]?console[n]:console.log):r=console.log;var o=function(e,r){return Array(r+1-(e+"").length).join("0")+e},l="["+o(e.time.getHours(),2)+":";l+=o(e.time.getMinutes(),2)+":",l+=o(e.time.getSeconds(),2)+":",l+=o(e.time.getMilliseconds(),4)+"] ",l+=i+": ",l+=s+": ",l+=e.msg,e.src&&(l+=" ("+e.src+")"),r.call(console,l),e.err&&e.err.stack&&r.call(console,e.err.stack),e.obj&&r.call(console,e.obj)},e}();e.ConsoleFormattedStream=z,e.ConsolePlainStream=S,e.ConsoleRawStream=y,e.DEBUG=20,e.ERROR=50,e.FATAL=60,e.INFO=30,e.Logger=d,e.TRACE=10,e.WARN=40,e.createLogger=function(){return o(d,[].slice.call(arguments))},e.levelFromName=r,e.nameFromLevel=t,e.resolveLevel=s,e.safeCycles=m,e.stdSerializers=w});
//# sourceMappingURL=index.umd.js.map
